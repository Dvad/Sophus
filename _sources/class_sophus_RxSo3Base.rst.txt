.. index:: pair: class; sophus::RxSo3Base
.. _doxid-classsophus_1_1_rx_so3_base:

template class sophus::RxSo3Base
================================

.. toctree::
	:hidden:

	struct_sophus_RxSo3Base_TangentAndTheta.rst

Overview
~~~~~~~~

:ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>` base type - implements :ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>` class but is storage agnostic. :ref:`More...<details-classsophus_1_1_rx_so3_base>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <rxso3.h>
	
	template <class TDerived>
	class RxSo3Base {
	public:
		// typedefs
	
		using :target:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>` = typename Eigen::internal::traits<TDerived>:::ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>` ;
		using :target:`QuaternionType<doxid-classsophus_1_1_rx_so3_base_1af620a2d10969f283a2c9d6a22a20afa1>` = typename Eigen::internal::traits<TDerived>:::ref:`QuaternionType<doxid-classsophus_1_1_rx_so3_base_1af620a2d10969f283a2c9d6a22a20afa1>` ;
		using :target:`QuaternionTemporaryType<doxid-classsophus_1_1_rx_so3_base_1af23864cb99b1f1f882be1b963f776836>` = Eigen::Quaternion<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kOptions<doxid-classsophus_1_1_rx_so3_base_1ab345b49fc0aa88b26e9cac5b6809ad23>`> ;
		using :target:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` = Eigen::Matrix<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kMatrixDim<doxid-classsophus_1_1_rx_so3_base_1a9f542f29c26ee29b795b6c3366a235c2>`, :ref:`kMatrixDim<doxid-classsophus_1_1_rx_so3_base_1a9f542f29c26ee29b795b6c3366a235c2>`> ;
		using :target:`Point<doxid-classsophus_1_1_rx_so3_base_1a5f35d393479812d0496b44eb9ab44022>` = Eigen::Vector3<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> ;
		using :target:`HomogeneousPoint<doxid-classsophus_1_1_rx_so3_base_1a9facdeb01455b1f529c58eb714a6df12>` = Eigen::Vector4<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> ;
		using :target:`Line<doxid-classsophus_1_1_rx_so3_base_1ab1e3cfe794e4c0064b4aafd4680191cf>` = Eigen::ParametrizedLine<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, 3> ;
		using :target:`Hyperplane<doxid-classsophus_1_1_rx_so3_base_1a4ecd51043f3d6418a367844c55781820>` = Eigen::Hyperplane<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, 3> ;
		using :target:`Tangent<doxid-classsophus_1_1_rx_so3_base_1a7feae57f88cd2a48e6bd06d434664731>` = Eigen::Vector<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kDoF<doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c>`> ;
		using :target:`Adjoint<doxid-classsophus_1_1_rx_so3_base_1a229e10e086801da29d8e08478b1c340e>` = Eigen::Matrix<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kDoF<doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c>`, :ref:`kDoF<doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c>`> ;
		using :ref:`ReturnScalar<doxid-classsophus_1_1_rx_so3_base_1ad7f3ab6a3cd51ebeb62eeaf8293e942c>` = typename Eigen::ScalarBinaryOpTraits<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, typename TOtherDerived::Scalar>::ReturnType ;
		using :target:`RxSo3Product<doxid-classsophus_1_1_rx_so3_base_1ad45fc33eedf9ef9e2ed7e1b4b86ed43b>` = :ref:`RxSo3<doxid-classsophus_1_1_rx_so3>`<:ref:`ReturnScalar<doxid-classsophus_1_1_rx_so3_base_1ad7f3ab6a3cd51ebeb62eeaf8293e942c>`<TOtherDerived>> ;
		using :target:`PointProduct<doxid-classsophus_1_1_rx_so3_base_1ad2b5d301a2c6e1c52539f628cb97d506>` = Eigen::Vector3<:ref:`ReturnScalar<doxid-classsophus_1_1_rx_so3_base_1ad7f3ab6a3cd51ebeb62eeaf8293e942c>`<TPointDerived>> ;
		using :target:`HomogeneousPointProduct<doxid-classsophus_1_1_rx_so3_base_1abf4bfe139fa03c2da61ac25424e05a12>` = Eigen::Vector4<:ref:`ReturnScalar<doxid-classsophus_1_1_rx_so3_base_1ad7f3ab6a3cd51ebeb62eeaf8293e942c>`<THPointDerived>> ;

		// structs
	
		struct :ref:`TangentAndTheta<doxid-structsophus_1_1_rx_so3_base_1_1_tangent_and_theta>`;

		// fields
	
		static constexpr int :target:`kOptions<doxid-classsophus_1_1_rx_so3_base_1ab345b49fc0aa88b26e9cac5b6809ad23>` = Eigen::internal::traits<TDerived>::kOptions;
		static constexpr int :ref:`kDoF<doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c>` = 4;
		static constexpr int :ref:`kNumParameters<doxid-classsophus_1_1_rx_so3_base_1a712e36e47af342ec8da09a7ac7bf2ca4>` = 4;
		static constexpr int :ref:`kMatrixDim<doxid-classsophus_1_1_rx_so3_base_1a9f542f29c26ee29b795b6c3366a235c2>` = 3;
		static constexpr int :ref:`kPointDim<doxid-classsophus_1_1_rx_so3_base_1ac8588ec57aae80defa892ae94519805a>` = 3;

		// methods
	
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Adjoint<doxid-classsophus_1_1_rx_so3_base_1a229e10e086801da29d8e08478b1c340e>` :ref:`adj<doxid-classsophus_1_1_rx_so3_base_1a4e40f4b0543901806f2310bb4e82f55b>`() const;
	
		template <class TNewScalarType>
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`RxSo3<doxid-classsophus_1_1_rx_so3>`<TNewScalarType> :ref:`cast<doxid-classsophus_1_1_rx_so3_base_1a38b8ddafe734ce6d5116569c0878d88a>`() const;
	
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`* :ref:`data<doxid-classsophus_1_1_rx_so3_base_1a1a9698bbfcba1a46a17a26806a7c3634>`();
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>` const* :ref:`data<doxid-classsophus_1_1_rx_so3_base_1a9d19eb53c5344071e1a82906c4eae495>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`RxSo3<doxid-classsophus_1_1_rx_so3>`<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> :ref:`inverse<doxid-classsophus_1_1_rx_so3_base_1a0e759683982f6670af0776640b0fe105>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Tangent<doxid-classsophus_1_1_rx_so3_base_1a7feae57f88cd2a48e6bd06d434664731>` :ref:`log<doxid-classsophus_1_1_rx_so3_base_1a7bf99ce5c52a02fcea3dc23eb66af63f>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`TangentAndTheta<doxid-structsophus_1_1_rx_so3_base_1_1_tangent_and_theta>` :ref:`logAndTheta<doxid-classsophus_1_1_rx_so3_base_1a4e668d97e08fbef99cd65f2f9f4fb76a>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` :ref:`matrix<doxid-classsophus_1_1_rx_so3_base_1a4a0f38a75be2f2e82554ecc85256900b>`() const;
	
		template <class TOtherDerived>
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` RxSo3Base<TDerived>& :ref:`operator=<doxid-classsophus_1_1_rx_so3_base_1a2ce10556b701874c97ee1c1d6066bfc2>`(RxSo3Base<TOtherDerived> const& other);
	
		template <class TOtherDerived>
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`RxSo3Product<doxid-classsophus_1_1_rx_so3_base_1ad45fc33eedf9ef9e2ed7e1b4b86ed43b>`<TOtherDerived> :ref:`operator*<doxid-classsophus_1_1_rx_so3_base_1ada323b64b161b30cac4c4664f4203f03>`(RxSo3Base<TOtherDerived> const& other) const;
	
		template <
			typename TPointDerived,
			typename = typename std::enable_if<IsFixedSizeVector<TPointDerived, 3>::value>::type
			>
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`PointProduct<doxid-classsophus_1_1_rx_so3_base_1ad2b5d301a2c6e1c52539f628cb97d506>`<TPointDerived> :ref:`operator*<doxid-classsophus_1_1_rx_so3_base_1acfd4ee6c15fc618e82cc1a2a83258346>`(Eigen::MatrixBase<TPointDerived> const& p) const;
	
		template <
			typename THPointDerived,
			typename = typename std::enable_if<IsFixedSizeVector<THPointDerived, 4>::value>::type
			>
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`HomogeneousPointProduct<doxid-classsophus_1_1_rx_so3_base_1abf4bfe139fa03c2da61ac25424e05a12>`<THPointDerived> :ref:`operator*<doxid-classsophus_1_1_rx_so3_base_1ac7bed3c3c9cec1785b66ae8b6e93322a>`(Eigen::MatrixBase<THPointDerived> const& p) const;
	
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Line<doxid-classsophus_1_1_rx_so3_base_1ab1e3cfe794e4c0064b4aafd4680191cf>` :ref:`operator*<doxid-classsophus_1_1_rx_so3_base_1a5060af7aa25766b864a4165a3e710703>`(:ref:`Line<doxid-classsophus_1_1_rx_so3_base_1ab1e3cfe794e4c0064b4aafd4680191cf>` const& l) const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Hyperplane<doxid-classsophus_1_1_rx_so3_base_1a4ecd51043f3d6418a367844c55781820>` :ref:`operator*<doxid-classsophus_1_1_rx_so3_base_1ae0a4d3dab891a713cc0afd0e3ef4418b>`(:ref:`Hyperplane<doxid-classsophus_1_1_rx_so3_base_1a4ecd51043f3d6418a367844c55781820>` const& p) const;
	
		template <
			typename TOtherDerived,
			typename = typename std::enable_if<std::is_same<Scalar, ReturnScalar<TOtherDerived>>::value>::type
			>
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` RxSo3Base<TDerived>& :ref:`operator*=<doxid-classsophus_1_1_rx_so3_base_1a036bec1f73cf3bcbe1d9aebe0e7d4831>`(RxSo3Base<TOtherDerived> const& other);
	
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` Eigen::Vector<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kNumParameters<doxid-classsophus_1_1_rx_so3_base_1a712e36e47af342ec8da09a7ac7bf2ca4>`> :ref:`params<doxid-classsophus_1_1_rx_so3_base_1a36a30ae6bd937eb981342a5bca149b2e>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void :ref:`setQuaternion<doxid-classsophus_1_1_rx_so3_base_1abe51676f80c620bf8320faf53364c4f2>`(Eigen::Quaternion<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> const& quat);
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`QuaternionType<doxid-classsophus_1_1_rx_so3_base_1af620a2d10969f283a2c9d6a22a20afa1>` const& :ref:`quaternion<doxid-classsophus_1_1_rx_so3_base_1a0adbdfef83ea5655992a15aa1032fd7c>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` :ref:`rotationMatrix<doxid-classsophus_1_1_rx_so3_base_1a85edd4d4d2eace298679aafaef54c026>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>` :ref:`scale<doxid-classsophus_1_1_rx_so3_base_1acb81c4e84bf91533beb04a237281416e>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void :ref:`setRotationMatrix<doxid-classsophus_1_1_rx_so3_base_1a2e747be1eec075f095818a4d1e5ffcfb>`(:ref:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` const& r);
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void :ref:`setScale<doxid-classsophus_1_1_rx_so3_base_1af63e52ac37de143e98db8b3e0c3e04cf>`(:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>` const& scale);
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void :ref:`setScaledRotationMatrix<doxid-classsophus_1_1_rx_so3_base_1a19ac108af4b35de32df20e6092474b04>`(:ref:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` const& s_r);
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void :ref:`setSO3<doxid-classsophus_1_1_rx_so3_base_1a176c9f5c758f229b355ced2c2c2d8559>`(:ref:`So3<doxid-classsophus_1_1_so3>`<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> const& so3);
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`So3<doxid-classsophus_1_1_so3>`<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> :target:`so3<doxid-classsophus_1_1_rx_so3_base_1a89cb9cd7e6541b9aacaa4a9e2bfe4ff1>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` Eigen::Matrix<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kNumParameters<doxid-classsophus_1_1_rx_so3_base_1a712e36e47af342ec8da09a7ac7bf2ca4>`, :ref:`kDoF<doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c>`> :ref:`dxThisMulExpXAt0<doxid-classsophus_1_1_rx_so3_base_1a0128c3ddca406a2a5fee100e2ee42fb5>`() const;
		:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` Eigen::Matrix<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kDoF<doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c>`, :ref:`kNumParameters<doxid-classsophus_1_1_rx_so3_base_1a712e36e47af342ec8da09a7ac7bf2ca4>`> :ref:`dxLogThisInvTimesXAtThis<doxid-classsophus_1_1_rx_so3_base_1a5c0b4a9d2f7a0f747617a4dd182401a1>`() const;
	};

	// direct descendants

	template <class TScalar, int kOptions>
	class :ref:`Map<sophus::RxSo3<TScalar> const, kOptions><doxid-class_eigen_1_1_map_3_01sophus_1_1_rx_so3_3_01_t_scalar_01_4_01const_00_01k_options_01_4>`;

	template <class TScalar, int kOptions>
	class :ref:`Map<sophus::RxSo3<TScalar>, kOptions><doxid-class_eigen_1_1_map_3_01sophus_1_1_rx_so3_3_01_t_scalar_01_4_00_01k_options_01_4>`;
.. _details-classsophus_1_1_rx_so3_base:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

:ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>` base type - implements :ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>` class but is storage agnostic.

This class implements the group ``R+ x SO(3)``, the direct product of the group of positive scalar 3x3 matrices (= isomorph to the positive real numbers) and the three-dimensional special orthogonal group SO(3). Geometrically, it is the group of rotation and scaling in three dimensions. As a matrix groups, :ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>` consists of matrices of the form ``s * R`` where ``R`` is an orthogonal matrix with ``det(R)=1`` and ``s > 0`` being a positive real number.

Internally, :ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>` is represented by the group of non-zero quaternions. In particular, the scale equals the squared(!) norm of the quaternion ``q``, ``s = |q|^2``. This is a most compact representation since the degrees of freedom (kDoF) of :ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>` (=4) equals the number of internal parameters (=4).

This class has the explicit class invariant that the scale ``s`` is not too close to either zero or infinity. Strictly speaking, it must hold that:

``:ref:`quaternion() <doxid-classsophus_1_1_rx_so3_base_1a0adbdfef83ea5655992a15aa1032fd7c>`.:ref:`squaredNorm() <doxid-namespacesophus_1a5d9d39781bc796e3733f73b703228690>` >= Constants::epsilon()`` and ``1. / :ref:`quaternion() <doxid-classsophus_1_1_rx_so3_base_1a0adbdfef83ea5655992a15aa1032fd7c>`.:ref:`squaredNorm() <doxid-namespacesophus_1a5d9d39781bc796e3733f73b703228690>` >= Constants::epsilon()``.

In order to obey this condition, group multiplication is implemented with saturation such that a product always has a scale which is equal or greater this threshold.

Typedefs
--------

.. index:: pair: typedef; ReturnScalar
.. _doxid-classsophus_1_1_rx_so3_base_1ad7f3ab6a3cd51ebeb62eeaf8293e942c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	using ReturnScalar = typename Eigen::ScalarBinaryOpTraits<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, typename TOtherDerived::Scalar>::ReturnType 

For binary operations the return type is determined with the ScalarBinaryOpTraits feature of :ref:`Eigen <doxid-namespace_eigen>`. This allows mixing concrete and Map types, as well as other compatible scalar types such as Ceres::Jet and double scalars with :ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>` operations.

Fields
------

.. index:: pair: variable; kDoF
.. _doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static constexpr int kDoF = 4

Degrees of freedom of manifold, number of dimensions in tangent space (three for rotation and one for scaling).

.. index:: pair: variable; kNumParameters
.. _doxid-classsophus_1_1_rx_so3_base_1a712e36e47af342ec8da09a7ac7bf2ca4:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static constexpr int kNumParameters = 4

Number of internal parameters used (quaternion is a 4-tuple).

.. index:: pair: variable; kMatrixDim
.. _doxid-classsophus_1_1_rx_so3_base_1a9f542f29c26ee29b795b6c3366a235c2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static constexpr int kMatrixDim = 3

Group transformations are 3x3 matrices.

.. index:: pair: variable; kPointDim
.. _doxid-classsophus_1_1_rx_so3_base_1ac8588ec57aae80defa892ae94519805a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static constexpr int kPointDim = 3

Points are 3-dimensional.

Methods
-------

.. index:: pair: function; adj
.. _doxid-classsophus_1_1_rx_so3_base_1a4e40f4b0543901806f2310bb4e82f55b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Adjoint<doxid-classsophus_1_1_rx_so3_base_1a229e10e086801da29d8e08478b1c340e>` adj() const

Adjoint transformation.

This function return the adjoint transformation ``Ad`` of the group element ``A`` such that for all ``x`` it holds that ``hat(Ad_A * x) = A * hat(x) A^{-1}``. See hat-operator below.

For RxSO(3), it simply returns the rotation matrix corresponding to ``A``.

.. index:: pair: function; cast
.. _doxid-classsophus_1_1_rx_so3_base_1a38b8ddafe734ce6d5116569c0878d88a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <class TNewScalarType>
	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`RxSo3<doxid-classsophus_1_1_rx_so3>`<TNewScalarType> cast() const

Returns copy of instance casted to NewScalarType.

.. index:: pair: function; data
.. _doxid-classsophus_1_1_rx_so3_base_1a1a9698bbfcba1a46a17a26806a7c3634:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`* data()

This provides unsafe read/write access to internal data. RxSO(3) is represented by an Eigen::Quaternion (four parameters). When using direct write access, the user needs to take care of that the quaternion is not set close to zero.

Note: The first three Scalars represent the imaginary parts, while the forth Scalar represent the real part.

.. index:: pair: function; data
.. _doxid-classsophus_1_1_rx_so3_base_1a9d19eb53c5344071e1a82906c4eae495:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>` const* data() const

Const version of :ref:`data() <doxid-classsophus_1_1_rx_so3_base_1a1a9698bbfcba1a46a17a26806a7c3634>` above.

.. index:: pair: function; inverse
.. _doxid-classsophus_1_1_rx_so3_base_1a0e759683982f6670af0776640b0fe105:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`RxSo3<doxid-classsophus_1_1_rx_so3>`<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> inverse() const

Returns group inverse.

.. index:: pair: function; log
.. _doxid-classsophus_1_1_rx_so3_base_1a7bf99ce5c52a02fcea3dc23eb66af63f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Tangent<doxid-classsophus_1_1_rx_so3_base_1a7feae57f88cd2a48e6bd06d434664731>` log() const

Logarithmic map.

Computes the logarithm, the inverse of the group exponential which maps element of the group (scaled rotation matrices) to elements of the tangent space (rotation-vector plus logarithm of scale factor).

To be specific, this function computes ``vee(logmat(.))`` with ``logmat(.)`` being the matrix logarithm and ``vee(.)`` the vee-operator of :ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>`.

.. index:: pair: function; logAndTheta
.. _doxid-classsophus_1_1_rx_so3_base_1a4e668d97e08fbef99cd65f2f9f4fb76a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`TangentAndTheta<doxid-structsophus_1_1_rx_so3_base_1_1_tangent_and_theta>` logAndTheta() const

As above, but also returns ``theta = |omega|``.

.. index:: pair: function; matrix
.. _doxid-classsophus_1_1_rx_so3_base_1a4a0f38a75be2f2e82554ecc85256900b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` matrix() const

Returns 3x3 matrix representation of the instance.

For :ref:`RxSo3 <doxid-classsophus_1_1_rx_so3>`, the matrix representation is an scaled orthogonal matrix ``sR`` with ``det(R)=s^3``, thus a scaled rotation matrix ``R`` with scale ``s``.

.. index:: pair: function; operator=
.. _doxid-classsophus_1_1_rx_so3_base_1a2ce10556b701874c97ee1c1d6066bfc2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <class TOtherDerived>
	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` RxSo3Base<TDerived>& operator=(RxSo3Base<TOtherDerived> const& other)

Assignment-like operator from OtherDerived.

.. index:: pair: function; operator*
.. _doxid-classsophus_1_1_rx_so3_base_1ada323b64b161b30cac4c4664f4203f03:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <class TOtherDerived>
	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`RxSo3Product<doxid-classsophus_1_1_rx_so3_base_1ad45fc33eedf9ef9e2ed7e1b4b86ed43b>`<TOtherDerived> operator*(RxSo3Base<TOtherDerived> const& other) const

Group multiplication, which is rotation concatenation and scale multiplication.

Note: This function performs saturation for products close to zero in order to ensure the class invariant.

.. index:: pair: function; operator*
.. _doxid-classsophus_1_1_rx_so3_base_1acfd4ee6c15fc618e82cc1a2a83258346:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <
		typename TPointDerived,
		typename = typename std::enable_if<IsFixedSizeVector<TPointDerived, 3>::value>::type
		>
	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`PointProduct<doxid-classsophus_1_1_rx_so3_base_1ad2b5d301a2c6e1c52539f628cb97d506>`<TPointDerived> operator*(Eigen::MatrixBase<TPointDerived> const& p) const

Group action on 3-points.

This function rotates a 3 dimensional point ``p`` by the :ref:`So3 <doxid-classsophus_1_1_so3>` element ``bar_R_foo`` (= rotation matrix) and scales it by the scale factor ``s`` :

``p_bar = s * (bar_R_foo * p_foo)``.

.. index:: pair: function; operator*
.. _doxid-classsophus_1_1_rx_so3_base_1ac7bed3c3c9cec1785b66ae8b6e93322a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <
		typename THPointDerived,
		typename = typename std::enable_if<IsFixedSizeVector<THPointDerived, 4>::value>::type
		>
	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`HomogeneousPointProduct<doxid-classsophus_1_1_rx_so3_base_1abf4bfe139fa03c2da61ac25424e05a12>`<THPointDerived> operator*(Eigen::MatrixBase<THPointDerived> const& p) const

Group action on homogeneous 3-points. See above for more details.

.. index:: pair: function; operator*
.. _doxid-classsophus_1_1_rx_so3_base_1a5060af7aa25766b864a4165a3e710703:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Line<doxid-classsophus_1_1_rx_so3_base_1ab1e3cfe794e4c0064b4aafd4680191cf>` operator*(:ref:`Line<doxid-classsophus_1_1_rx_so3_base_1ab1e3cfe794e4c0064b4aafd4680191cf>` const& l) const

Group action on lines.

This function rotates a parametrized line ``l(t) = o + t * d`` by the :ref:`So3 <doxid-classsophus_1_1_so3>` element ans scales it by the scale factor:

Origin ``o`` is rotated and scaled Direction ``d`` is rotated (preserving it's norm)

.. index:: pair: function; operator*
.. _doxid-classsophus_1_1_rx_so3_base_1ae0a4d3dab891a713cc0afd0e3ef4418b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Hyperplane<doxid-classsophus_1_1_rx_so3_base_1a4ecd51043f3d6418a367844c55781820>` operator*(:ref:`Hyperplane<doxid-classsophus_1_1_rx_so3_base_1a4ecd51043f3d6418a367844c55781820>` const& p) const

Group action on planes.

This function rotates parametrized plane ``n.x + d = 0`` by the :ref:`So3 <doxid-classsophus_1_1_so3>` element and scales it by the scale factor:

Normal vector ``n`` is rotated Offset ``d`` is scaled

.. index:: pair: function; operator*=
.. _doxid-classsophus_1_1_rx_so3_base_1a036bec1f73cf3bcbe1d9aebe0e7d4831:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <
		typename TOtherDerived,
		typename = typename std::enable_if<std::is_same<Scalar, ReturnScalar<TOtherDerived>>::value>::type
		>
	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` RxSo3Base<TDerived>& operator*=(RxSo3Base<TOtherDerived> const& other)

In-place group multiplication. This method is only valid if the return type of the multiplication is compatible with this :ref:`So3 <doxid-classsophus_1_1_so3>` 's Scalar type.

Note: This function performs saturation for products close to zero in order to ensure the class invariant.

.. index:: pair: function; params
.. _doxid-classsophus_1_1_rx_so3_base_1a36a30ae6bd937eb981342a5bca149b2e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` Eigen::Vector<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kNumParameters<doxid-classsophus_1_1_rx_so3_base_1a712e36e47af342ec8da09a7ac7bf2ca4>`> params() const

Returns internal parameters of RxSO(3).

It returns (q.imag[0], q.imag[1], q.imag[2], q.real), with q being the quaternion.

.. index:: pair: function; setQuaternion
.. _doxid-classsophus_1_1_rx_so3_base_1abe51676f80c620bf8320faf53364c4f2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void setQuaternion(Eigen::Quaternion<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> const& quat)

Sets non-zero quaternion.

Precondition: ``quat`` must not be close to either zero or infinity

.. index:: pair: function; quaternion
.. _doxid-classsophus_1_1_rx_so3_base_1a0adbdfef83ea5655992a15aa1032fd7c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`QuaternionType<doxid-classsophus_1_1_rx_so3_base_1af620a2d10969f283a2c9d6a22a20afa1>` const& quaternion() const

Accessor of quaternion.

.. index:: pair: function; rotationMatrix
.. _doxid-classsophus_1_1_rx_so3_base_1a85edd4d4d2eace298679aafaef54c026:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` rotationMatrix() const

Returns rotation matrix.

.. index:: pair: function; scale
.. _doxid-classsophus_1_1_rx_so3_base_1acb81c4e84bf91533beb04a237281416e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` :ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>` scale() const

Returns scale.

.. index:: pair: function; setRotationMatrix
.. _doxid-classsophus_1_1_rx_so3_base_1a2e747be1eec075f095818a4d1e5ffcfb:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void setRotationMatrix(:ref:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` const& r)

Setter of quaternion using rotation matrix ``R``, leaves scale as is.

.. index:: pair: function; setScale
.. _doxid-classsophus_1_1_rx_so3_base_1af63e52ac37de143e98db8b3e0c3e04cf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void setScale(:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>` const& scale)

Sets scale and leaves rotation as is.

Note: This function as a significant computational cost, since it has to call the square root twice.

.. index:: pair: function; setScaledRotationMatrix
.. _doxid-classsophus_1_1_rx_so3_base_1a19ac108af4b35de32df20e6092474b04:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void setScaledRotationMatrix(:ref:`Transformation<doxid-classsophus_1_1_rx_so3_base_1ad1a2bc4b90ab977c4a9d311847599b03>` const& s_r)

Setter of quaternion using scaled rotation matrix ``sR``.

Precondition: The 3x3 matrix must be "scaled orthogonal" and have a positive determinant.

.. index:: pair: function; setSO3
.. _doxid-classsophus_1_1_rx_so3_base_1a176c9f5c758f229b355ced2c2c2d8559:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` void setSO3(:ref:`So3<doxid-classsophus_1_1_so3>`<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`> const& so3)

Setter of SO(3) rotations, leaves scale as is.

.. index:: pair: function; dxThisMulExpXAt0
.. _doxid-classsophus_1_1_rx_so3_base_1a0128c3ddca406a2a5fee100e2ee42fb5:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` Eigen::Matrix<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kNumParameters<doxid-classsophus_1_1_rx_so3_base_1a712e36e47af342ec8da09a7ac7bf2ca4>`, :ref:`kDoF<doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c>`> dxThisMulExpXAt0() const

Returns derivative of this \* RxSo3::exp(x) wrt. x at x=0.

.. index:: pair: function; dxLogThisInvTimesXAtThis
.. _doxid-classsophus_1_1_rx_so3_base_1a5c0b4a9d2f7a0f747617a4dd182401a1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`SOPHUS_FUNC<doxid-common_8h_1a719070c34a48abcdf2f623e4160b4c28>` Eigen::Matrix<:ref:`Scalar<doxid-classsophus_1_1_rx_so3_base_1ab9cfe5a19bd08fb23426ff7e836f8e08>`, :ref:`kDoF<doxid-classsophus_1_1_rx_so3_base_1ad9b391d0f172d90fbbe33bb1fcfafb2c>`, :ref:`kNumParameters<doxid-classsophus_1_1_rx_so3_base_1a712e36e47af342ec8da09a7ac7bf2ca4>`> dxLogThisInvTimesXAtThis() const

Returns derivative of log(this^{-1} \* x) by x at x=this.

